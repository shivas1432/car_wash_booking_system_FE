{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shivashanker\\\\react\\\\car wash\\\\frontend\\\\src\\\\components\\\\BookingsCalendar.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport api from '../config/axios';\nimport '../css/BookingsCalendar.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BookingsCalendar = () => {\n  _s();\n  // State for calendar and bookings\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const [weekDates, setWeekDates] = useState([]);\n  const [bookings, setBookings] = useState([]);\n  const [filteredBookings, setFilteredBookings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [updateSuccess, setUpdateSuccess] = useState('');\n\n  // Format date for display and comparison\n  const formatDate = date => {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  };\n\n  // Format date for display in UI\n  const formatDisplayDate = date => {\n    return date.toLocaleDateString('en-US', {\n      weekday: 'short',\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n\n  // Display status function (converts 'pending' to 'confirmed')\n  const displayStatus = status => {\n    if (!status || status.toLowerCase() === 'pending') {\n      return 'confirmed';\n    }\n    return status;\n  };\n\n  // Generate week dates\n  const generateWeekDates = currentDate => {\n    const week = [];\n    const startDay = new Date(currentDate);\n    startDay.setDate(currentDate.getDate() - currentDate.getDay() + 1); // Start from Monday\n\n    for (let i = 0; i < 7; i++) {\n      const day = new Date(startDay);\n      day.setDate(startDay.getDate() + i);\n      week.push(day);\n    }\n    setWeekDates(week);\n  };\n\n  // Handle date selection\n  const handleDateSelect = date => {\n    setSelectedDate(date);\n    filterBookingsByDate(date, bookings);\n  };\n\n  // Navigate to previous week\n  const handlePrevWeek = () => {\n    const prevWeek = new Date(weekDates[0]);\n    prevWeek.setDate(prevWeek.getDate() - 7);\n    generateWeekDates(prevWeek);\n    setSelectedDate(prevWeek);\n    filterBookingsByDate(prevWeek, bookings);\n  };\n\n  // Navigate to next week\n  const handleNextWeek = () => {\n    const nextWeek = new Date(weekDates[6]);\n    nextWeek.setDate(nextWeek.getDate() + 1);\n    generateWeekDates(nextWeek);\n    setSelectedDate(nextWeek);\n    filterBookingsByDate(nextWeek, bookings);\n  };\n\n  // Filter bookings by selected date\n  const filterBookingsByDate = (date, allBookings) => {\n    const dateString = formatDate(date);\n    const filtered = allBookings.filter(booking => {\n      const bookingDate = booking.date || booking.booking_date;\n      return bookingDate && bookingDate.includes(dateString);\n    });\n\n    // Sort bookings by time slot\n    filtered.sort((a, b) => {\n      const timeA = a.time_slot || a.booking_time || '';\n      const timeB = b.time_slot || b.booking_time || '';\n      return timeA.localeCompare(timeB);\n    });\n    setFilteredBookings(filtered);\n  };\n\n  // Fetch all bookings\n  const fetchBookings = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const token = localStorage.getItem('adminToken');\n      const response = await api.get('/api/admin/bookings', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setBookings(response.data);\n      filterBookingsByDate(selectedDate, response.data);\n      setLoading(false);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to load bookings');\n      setLoading(false);\n    }\n  };\n\n  // Handle booking status update with point system\n  const handleUpdateBooking = async (bookingId, status) => {\n    try {\n      const token = localStorage.getItem('adminToken');\n      const pointsToAdd = status === 'delivered' ? 10 : 0;\n      await api.put(`/api/admin/bookings/${bookingId}`, {\n        status,\n        notes: `Status changed to ${status} by admin`,\n        addPoints: pointsToAdd\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      // Update booking in state\n      setBookings(bookings.map(booking => booking.id === bookingId ? {\n        ...booking,\n        status\n      } : booking));\n      setFilteredBookings(filteredBookings.map(booking => booking.id === bookingId ? {\n        ...booking,\n        status\n      } : booking));\n      let successMessage = `Booking #${bookingId} updated to ${status}`;\n      if (status === 'delivered') {\n        successMessage += '. 10 points added to user.';\n      }\n      setUpdateSuccess(successMessage);\n\n      // Clear success message after 3 seconds\n      setTimeout(() => {\n        setUpdateSuccess('');\n      }, 3000);\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Failed to update booking');\n    }\n  };\n\n  // Format time for display\n  const formatTime = timeString => {\n    if (!timeString) return 'N/A';\n    // Check if timeString is in HH:MM:SS format\n    if (/^\\d{2}:\\d{2}:\\d{2}$/.test(timeString)) {\n      const [hours, minutes] = timeString.split(':');\n      const hour = parseInt(hours);\n      let period = 'AM';\n      let displayHour = hour;\n      if (hour > 12) {\n        displayHour = hour - 12;\n        period = 'PM';\n      } else if (hour === 12) {\n        period = 'PM';\n      } else if (hour === 0) {\n        displayHour = 12;\n      }\n      return `${displayHour}:${minutes} ${period}`;\n    }\n\n    // If not in the expected format, just return as is\n    return timeString;\n  };\n\n  // Initialize component\n  useEffect(() => {\n    generateWeekDates(selectedDate);\n    fetchBookings();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bookings-calendar-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bookings-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Bookings Calendar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/admin/dashboard\",\n        className: \"back-to-dashboard\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-arrow-left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), \" Back to Dashboard\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }, this), updateSuccess && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-success\",\n      children: updateSuccess\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calendar-navigation\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"nav-btn prev\",\n        onClick: handlePrevWeek,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-chevron-left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"week-dates\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"days-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Mon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Tue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Wed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Thu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Fri\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Sat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Sun\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dates-row\",\n          children: weekDates.map((date, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `date-item ${formatDate(date) === formatDate(selectedDate) ? 'selected' : ''}`,\n            onClick: () => handleDateSelect(date),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"date-number\",\n              children: date.getDate()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"date-month\",\n              children: date.toLocaleDateString('en-US', {\n                month: 'short'\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"nav-btn next\",\n        onClick: handleNextWeek,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-chevron-right\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selected-date-display\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Bookings for \", formatDisplayDate(selectedDate)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bookings-list\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-loading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Loading bookings...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this) : filteredBookings.length > 0 ? filteredBookings.map(booking => {\n        // Get the booking status, converting 'pending' to 'confirmed' for display\n        const statusDisplay = displayStatus(booking.status);\n        // Get the real status for button logic\n        const realStatus = booking.status || 'pending';\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"booking-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"booking-time\",\n            children: formatTime(booking.time_slot || booking.booking_time)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"booking-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"booking-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"booking-id\",\n                children: [\"#\", booking.id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `booking-status ${realStatus === 'pending' ? 'confirmed' : realStatus || 'confirmed'}`,\n                children: statusDisplay\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"booking-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"booking-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Customer:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 26\n                  }, this), \" \", booking.customer_name || booking.username]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Service:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 274,\n                    columnNumber: 26\n                  }, this), \" \", booking.service, \" \", booking.subservice ? `- ${booking.subservice}` : '']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Car:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 26\n                  }, this), \" \", booking.model, \" (\", booking.plate_number, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Price:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 26\n                  }, this), \" $\", booking.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"booking-actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `status-btn work-started ${realStatus === 'work started' ? 'active' : ''}`,\n                  onClick: () => handleUpdateBooking(booking.id, 'work started'),\n                  disabled: realStatus === 'work started' || realStatus === 'ready to collect' || realStatus === 'delivered' || realStatus === 'cancelled',\n                  children: \"Work Started\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `status-btn ready ${realStatus === 'ready to collect' ? 'active' : ''}`,\n                  onClick: () => handleUpdateBooking(booking.id, 'ready to collect'),\n                  disabled: realStatus === 'ready to collect' || realStatus === 'delivered' || realStatus === 'cancelled' || !['work started', 'confirmed', 'pending'].includes(realStatus),\n                  children: \"Ready\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `status-btn delivered ${realStatus === 'delivered' ? 'active' : ''}`,\n                  onClick: () => handleUpdateBooking(booking.id, 'delivered'),\n                  disabled: realStatus === 'delivered' || realStatus === 'cancelled' || realStatus !== 'ready to collect',\n                  children: \"Delivered\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `status-btn cancelled ${realStatus === 'cancelled' ? 'active' : ''}`,\n                  onClick: () => handleUpdateBooking(booking.id, 'cancelled'),\n                  disabled: realStatus === 'delivered' || realStatus === 'cancelled',\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 17\n          }, this)]\n        }, booking.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 15\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-bookings\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-calendar-times\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No bookings found for this date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 5\n  }, this);\n};\n_s(BookingsCalendar, \"N22qCkr0VyuX8e6QHCeBzKlxQsg=\");\n_c = BookingsCalendar;\nexport default BookingsCalendar;\nvar _c;\n$RefreshReg$(_c, \"BookingsCalendar\");","map":{"version":3,"names":["React","useState","useEffect","Link","api","jsxDEV","_jsxDEV","BookingsCalendar","_s","selectedDate","setSelectedDate","Date","weekDates","setWeekDates","bookings","setBookings","filteredBookings","setFilteredBookings","loading","setLoading","error","setError","updateSuccess","setUpdateSuccess","formatDate","date","year","getFullYear","month","String","getMonth","padStart","day","getDate","formatDisplayDate","toLocaleDateString","weekday","displayStatus","status","toLowerCase","generateWeekDates","currentDate","week","startDay","setDate","getDay","i","push","handleDateSelect","filterBookingsByDate","handlePrevWeek","prevWeek","handleNextWeek","nextWeek","allBookings","dateString","filtered","filter","booking","bookingDate","booking_date","includes","sort","a","b","timeA","time_slot","booking_time","timeB","localeCompare","fetchBookings","token","localStorage","getItem","response","get","headers","Authorization","data","err","_err$response","_err$response$data","message","handleUpdateBooking","bookingId","pointsToAdd","put","notes","addPoints","map","id","successMessage","setTimeout","_err$response2","_err$response2$data","formatTime","timeString","test","hours","minutes","split","hour","parseInt","period","displayHour","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","onClick","index","length","statusDisplay","realStatus","customer_name","username","service","subservice","model","plate_number","price","disabled","_c","$RefreshReg$"],"sources":["C:/Users/shivashanker/react/car wash/frontend/src/components/BookingsCalendar.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport api from '../config/axios';\r\nimport '../css/BookingsCalendar.css';\r\n\r\nconst BookingsCalendar = () => {\r\n  // State for calendar and bookings\r\n  const [selectedDate, setSelectedDate] = useState(new Date());\r\n  const [weekDates, setWeekDates] = useState([]);\r\n  const [bookings, setBookings] = useState([]);\r\n  const [filteredBookings, setFilteredBookings] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [updateSuccess, setUpdateSuccess] = useState('');\r\n\r\n  // Format date for display and comparison\r\n  const formatDate = (date) => {\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    return `${year}-${month}-${day}`;\r\n  };\r\n\r\n  // Format date for display in UI\r\n  const formatDisplayDate = (date) => {\r\n    return date.toLocaleDateString('en-US', {\r\n      weekday: 'short',\r\n      month: 'short',\r\n      day: 'numeric'\r\n    });\r\n  };\r\n\r\n  // Display status function (converts 'pending' to 'confirmed')\r\n  const displayStatus = (status) => {\r\n    if (!status || status.toLowerCase() === 'pending') {\r\n      return 'confirmed';\r\n    }\r\n    return status;\r\n  };\r\n\r\n  // Generate week dates\r\n  const generateWeekDates = (currentDate) => {\r\n    const week = [];\r\n    const startDay = new Date(currentDate);\r\n    startDay.setDate(currentDate.getDate() - currentDate.getDay() + 1); // Start from Monday\r\n\r\n    for (let i = 0; i < 7; i++) {\r\n      const day = new Date(startDay);\r\n      day.setDate(startDay.getDate() + i);\r\n      week.push(day);\r\n    }\r\n\r\n    setWeekDates(week);\r\n  };\r\n\r\n  // Handle date selection\r\n  const handleDateSelect = (date) => {\r\n    setSelectedDate(date);\r\n    filterBookingsByDate(date, bookings);\r\n  };\r\n\r\n  // Navigate to previous week\r\n  const handlePrevWeek = () => {\r\n    const prevWeek = new Date(weekDates[0]);\r\n    prevWeek.setDate(prevWeek.getDate() - 7);\r\n    generateWeekDates(prevWeek);\r\n    setSelectedDate(prevWeek);\r\n    filterBookingsByDate(prevWeek, bookings);\r\n  };\r\n\r\n  // Navigate to next week\r\n  const handleNextWeek = () => {\r\n    const nextWeek = new Date(weekDates[6]);\r\n    nextWeek.setDate(nextWeek.getDate() + 1);\r\n    generateWeekDates(nextWeek);\r\n    setSelectedDate(nextWeek);\r\n    filterBookingsByDate(nextWeek, bookings);\r\n  };\r\n\r\n  // Filter bookings by selected date\r\n  const filterBookingsByDate = (date, allBookings) => {\r\n    const dateString = formatDate(date);\r\n    const filtered = allBookings.filter(booking => {\r\n      const bookingDate = booking.date || booking.booking_date;\r\n      return bookingDate && bookingDate.includes(dateString);\r\n    });\r\n    \r\n    // Sort bookings by time slot\r\n    filtered.sort((a, b) => {\r\n      const timeA = a.time_slot || a.booking_time || '';\r\n      const timeB = b.time_slot || b.booking_time || '';\r\n      return timeA.localeCompare(timeB);\r\n    });\r\n    \r\n    setFilteredBookings(filtered);\r\n  };\r\n\r\n  // Fetch all bookings\r\n  const fetchBookings = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const token = localStorage.getItem('adminToken');\r\n      const response = await api.get('/api/admin/bookings', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      setBookings(response.data);\r\n      filterBookingsByDate(selectedDate, response.data);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Failed to load bookings');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Handle booking status update with point system\r\n  const handleUpdateBooking = async (bookingId, status) => {\r\n    try {\r\n      const token = localStorage.getItem('adminToken');\r\n      const pointsToAdd = status === 'delivered' ? 10 : 0;\r\n      \r\n      await api.put(`/api/admin/bookings/${bookingId}`, \r\n        { \r\n          status, \r\n          notes: `Status changed to ${status} by admin`,\r\n          addPoints: pointsToAdd\r\n        },\r\n        { headers: { Authorization: `Bearer ${token}` }}\r\n      );\r\n      \r\n      // Update booking in state\r\n      setBookings(bookings.map(booking => \r\n        booking.id === bookingId ? { ...booking, status } : booking\r\n      ));\r\n      \r\n      setFilteredBookings(filteredBookings.map(booking => \r\n        booking.id === bookingId ? { ...booking, status } : booking\r\n      ));\r\n      \r\n      let successMessage = `Booking #${bookingId} updated to ${status}`;\r\n      if (status === 'delivered') {\r\n        successMessage += '. 10 points added to user.';\r\n      }\r\n      \r\n      setUpdateSuccess(successMessage);\r\n      \r\n      // Clear success message after 3 seconds\r\n      setTimeout(() => {\r\n        setUpdateSuccess('');\r\n      }, 3000);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Failed to update booking');\r\n    }\r\n  };\r\n\r\n  // Format time for display\r\n  const formatTime = (timeString) => {\r\n    if (!timeString) return 'N/A';\r\n    // Check if timeString is in HH:MM:SS format\r\n    if (/^\\d{2}:\\d{2}:\\d{2}$/.test(timeString)) {\r\n      const [hours, minutes] = timeString.split(':');\r\n      const hour = parseInt(hours);\r\n      let period = 'AM';\r\n      \r\n      let displayHour = hour;\r\n      if (hour > 12) {\r\n        displayHour = hour - 12;\r\n        period = 'PM';\r\n      } else if (hour === 12) {\r\n        period = 'PM';\r\n      } else if (hour === 0) {\r\n        displayHour = 12;\r\n      }\r\n      \r\n      return `${displayHour}:${minutes} ${period}`;\r\n    }\r\n    \r\n    // If not in the expected format, just return as is\r\n    return timeString;\r\n  };\r\n\r\n  // Initialize component\r\n  useEffect(() => {\r\n    generateWeekDates(selectedDate);\r\n    fetchBookings();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"bookings-calendar-container\">\r\n      <div className=\"bookings-header\">\r\n        <h1>Bookings Calendar</h1>\r\n        <Link to=\"/admin/dashboard\" className=\"back-to-dashboard\">\r\n          <i className=\"fas fa-arrow-left\"></i> Back to Dashboard\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Error and success messages */}\r\n      {error && <div className=\"admin-error\">{error}</div>}\r\n      {updateSuccess && <div className=\"admin-success\">{updateSuccess}</div>}\r\n\r\n      {/* Calendar navigation */}\r\n      <div className=\"calendar-navigation\">\r\n        <button className=\"nav-btn prev\" onClick={handlePrevWeek}>\r\n          <i className=\"fas fa-chevron-left\"></i>\r\n        </button>\r\n        \r\n        <div className=\"week-dates\">\r\n          <div className=\"days-header\">\r\n            <div>Mon</div>\r\n            <div>Tue</div>\r\n            <div>Wed</div>\r\n            <div>Thu</div>\r\n            <div>Fri</div>\r\n            <div>Sat</div>\r\n            <div>Sun</div>\r\n          </div>\r\n          <div className=\"dates-row\">\r\n            {weekDates.map((date, index) => (\r\n              <div \r\n                key={index}\r\n                className={`date-item ${formatDate(date) === formatDate(selectedDate) ? 'selected' : ''}`}\r\n                onClick={() => handleDateSelect(date)}\r\n              >\r\n                <div className=\"date-number\">{date.getDate()}</div>\r\n                <div className=\"date-month\">{date.toLocaleDateString('en-US', { month: 'short' })}</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        \r\n        <button className=\"nav-btn next\" onClick={handleNextWeek}>\r\n          <i className=\"fas fa-chevron-right\"></i>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Selected date display */}\r\n      <div className=\"selected-date-display\">\r\n        <h2>Bookings for {formatDisplayDate(selectedDate)}</h2>\r\n      </div>\r\n\r\n      {/* Bookings list */}\r\n      <div className=\"bookings-list\">\r\n        {loading ? (\r\n          <div className=\"admin-loading\">\r\n            <div className=\"admin-spinner\"></div>\r\n            <span>Loading bookings...</span>\r\n          </div>\r\n        ) : filteredBookings.length > 0 ? (\r\n          filteredBookings.map(booking => {\r\n            // Get the booking status, converting 'pending' to 'confirmed' for display\r\n            const statusDisplay = displayStatus(booking.status);\r\n            // Get the real status for button logic\r\n            const realStatus = booking.status || 'pending';\r\n            \r\n            return (\r\n              <div key={booking.id} className=\"booking-item\">\r\n                <div className=\"booking-time\">\r\n                  {formatTime(booking.time_slot || booking.booking_time)}\r\n                </div>\r\n                \r\n                <div className=\"booking-card\">\r\n                  <div className=\"booking-header\">\r\n                    <span className=\"booking-id\">#{booking.id}</span>\r\n                    <span className={`booking-status ${realStatus === 'pending' ? 'confirmed' : (realStatus || 'confirmed')}`}>\r\n                      {statusDisplay}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  <div className=\"booking-details\">\r\n                    <div className=\"booking-info\">\r\n                      <p><strong>Customer:</strong> {booking.customer_name || booking.username}</p>\r\n                      <p><strong>Service:</strong> {booking.service} {booking.subservice ? `- ${booking.subservice}` : ''}</p>\r\n                      <p><strong>Car:</strong> {booking.model} ({booking.plate_number})</p>\r\n                      <p><strong>Price:</strong> ${booking.price}</p>\r\n                    </div>\r\n                    \r\n                    {/* Status update actions */}\r\n                    <div className=\"booking-actions\">\r\n                      <button \r\n                        className={`status-btn work-started ${realStatus === 'work started' ? 'active' : ''}`}\r\n                        onClick={() => handleUpdateBooking(booking.id, 'work started')}\r\n                        disabled={realStatus === 'work started' || realStatus === 'ready to collect' || realStatus === 'delivered' || realStatus === 'cancelled'}\r\n                      >\r\n                        Work Started\r\n                      </button>\r\n                      <button \r\n                        className={`status-btn ready ${realStatus === 'ready to collect' ? 'active' : ''}`}\r\n                        onClick={() => handleUpdateBooking(booking.id, 'ready to collect')}\r\n                        disabled={realStatus === 'ready to collect' || realStatus === 'delivered' || realStatus === 'cancelled' || !['work started', 'confirmed', 'pending'].includes(realStatus)}\r\n                      >\r\n                        Ready\r\n                      </button>\r\n                      <button \r\n                        className={`status-btn delivered ${realStatus === 'delivered' ? 'active' : ''}`}\r\n                        onClick={() => handleUpdateBooking(booking.id, 'delivered')}\r\n                        disabled={realStatus === 'delivered' || realStatus === 'cancelled' || realStatus !== 'ready to collect'}\r\n                      >\r\n                        Delivered\r\n                      </button>\r\n                      <button \r\n                        className={`status-btn cancelled ${realStatus === 'cancelled' ? 'active' : ''}`}\r\n                        onClick={() => handleUpdateBooking(booking.id, 'cancelled')}\r\n                        disabled={realStatus === 'delivered' || realStatus === 'cancelled'}\r\n                      >\r\n                        Cancel\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <div className=\"no-bookings\">\r\n            <i className=\"fas fa-calendar-times\"></i>\r\n            <p>No bookings found for this date</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookingsCalendar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}